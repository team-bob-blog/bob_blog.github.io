---
layout: page
title: example 팀 포스팅 일정
description: >
  example/_posts 아래에 있는 글들을 날짜별로 묶어 한눈에 확인할 수 있는 달력입니다.
hide_description: true
sitemap: false
permalink: /calendar/
---

{% assign example_posts = site.categories.example %}
{% if example_posts == empty %}
  {% assign example_posts = site.posts | where_exp: 'post', 'post.path contains "example/_posts/"' %}
{% endif %}
{% assign example_posts = example_posts | sort: 'date' %}

<style>
/* 캘린더 전체 컨테이너 */
.calendar-wrapper {
  max-width: 1000px;
  margin: 0 auto;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* 상단 헤더 */
.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 12px;
}

.month-label {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0;
  color: #333;
}

.calendar-nav button {
  background: white;
  border: 1px solid #ddd;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s;
}
.calendar-nav button:hover { background: #eee; }

/* 달력 그리드 */
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  overflow: hidden;
  background: white;
}

/* 요일 헤더 */
.weekday {
  background: #f1f3f5;
  padding: 10px 0;
  text-align: center;
  font-weight: bold;
  color: #495057;
  border-bottom: 1px solid #e0e0e0;
}

/* 날짜 셀 */
.day-cell {
  min-height: 100px;
  border-right: 1px solid #f0f0f0;
  border-bottom: 1px solid #f0f0f0;
  padding: 8px;
  position: relative;
  cursor: pointer;
  transition: background 0.2s;
}
.day-cell:nth-child(7n) { border-right: none; }
.day-cell:hover { background: #f8f9fa; }
.day-cell.selected { background: #e7f5ff; border: 2px solid #339af0; z-index: 1; }
.day-cell.today { background: #fff3bf; }
.day-cell.other-month { background: #fcfcfc; color: #ccc; pointer-events: none; }

.day-number { font-weight: 600; margin-bottom: 5px; display: block; }

/* 게시물 개수 뱃지 */
.post-badge {
  display: inline-block;
  background-color: #339af0;
  color: white;
  font-size: 0.75rem;
  padding: 2px 8px;
  border-radius: 10px;
  margin-top: 4px;
  font-weight: bold;
}

/* 하단 상세 패널 */
.detail-panel {
  margin-top: 20px;
  padding: 20px;
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}
.detail-date {
  font-size: 1.2rem;
  font-weight: bold;
  border-bottom: 2px solid #339af0;
  padding-bottom: 8px;
  margin-bottom: 15px;
  color: #333;
}
.detail-list { list-style: none; padding: 0; margin: 0; }
.detail-item {
  padding: 12px;
  border-bottom: 1px solid #eee;
  display: flex;
  align-items: center;
}
.detail-item:last-child { border-bottom: none; }
.detail-item a {
  text-decoration: none;
  color: #333;
  font-weight: 500;
  font-size: 1.05rem;
}
.detail-item a:hover { color: #339af0; text-decoration: underline; }
.detail-category {
  background: #e9ecef;
  color: #495057;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.8rem;
  margin-right: 10px;
  white-space: nowrap;
}
</style>

<div class="calendar-wrapper">
  <div class="calendar-header">
    <h2 id="currentMonth" class="month-label"></h2>
    <div class="calendar-nav">
      <button onclick="changeMonth(-1)">◀</button>
      <button onclick="goToday()">오늘</button>
      <button onclick="changeMonth(1)">▶</button>
    </div>
  </div>

  <div class="calendar-grid" id="calendarGrid">
    </div>

  <div class="detail-panel" id="detailPanel">
    <div id="selectedDateDisplay" class="detail-date">날짜를 선택해주세요</div>
    <div id="postListContainer" class="detail-list">
      <p style="color: #888;">위 달력에서 날짜를 클릭하면 상세 일정이 표시됩니다.</p>
    </div>
  </div>
</div>

<script type="application/json" id="posts-data">
[
{% for post in example_posts %}
  {
    "date": "{{ post.date | date: "%Y-%m-%d" }}",
    "title": {{ post.title | jsonify }},
    "url": {{ post.url | relative_url | jsonify }},
    "category": "{{ post.categories | first | default: '기타' }}"
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
]
</script>

<script>
const posts = JSON.parse(document.getElementById('posts-data').textContent);
const postsMap = {};

// 게시물 데이터를 날짜별로 정리
posts.forEach(p => {
  if (!postsMap[p.date]) postsMap[p.date] = [];
  postsMap[p.date].push(p);
});

let currDate = new Date();

function renderCalendar() {
  const year = currDate.getFullYear();
  const month = currDate.getMonth();
  const todayStr = new Date().toISOString().split('T')[0];

  // 월 표시
  document.getElementById('currentMonth').innerText = `${year}년 ${month + 1}월`;

  const grid = document.getElementById('calendarGrid');
  grid.innerHTML = `
    <div class="weekday" style="color:#e03131">일</div>
    <div class="weekday">월</div>
    <div class="weekday">화</div>
    <div class="weekday">수</div>
    <div class="weekday">목</div>
    <div class="weekday">금</div>
    <div class="weekday" style="color:#1971c2">토</div>
  `;

  const firstDay = new Date(year, month, 1).getDay();
  const lastDate = new Date(year, month + 1, 0).getDate();

  // 빈 칸 채우기
  for (let i = 0; i < firstDay; i++) {
    grid.innerHTML += `<div class="day-cell other-month"></div>`;
  }

  // 날짜 채우기
  for (let i = 1; i <= lastDate; i++) {
    const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
    const count = postsMap[dateKey] ? postsMap[dateKey].length : 0;
    const isToday = dateKey === todayStr ? 'today' : '';
    
    let badgeHtml = count > 0 ? `<div class="post-badge">${count}개 일정</div>` : '';

    const cell = document.createElement('div');
    cell.className = `day-cell ${isToday}`;
    cell.innerHTML = `<span class="day-number">${i}</span>${badgeHtml}`;
    cell.onclick = function() {
      selectDate(dateKey, this);
    };
    grid.appendChild(cell);
  }
}

function selectDate(date, element) {
  // 선택 효과
  document.querySelectorAll('.day-cell').forEach(el => el.classList.remove('selected'));
  element.classList.add('selected');

  // 상세 리스트 업데이트
  const [y, m, d] = date.split('-');
  document.getElementById('selectedDateDisplay').innerText = `${y}년 ${m}월 ${d}일 상세 일정`;
  
  const listContainer = document.getElementById('postListContainer');
  const dayPosts = postsMap[date] || [];

  if (dayPosts.length === 0) {
    listContainer.innerHTML = `<p style="color: #888; padding: 10px;">등록된 게시물이 없습니다.</p>`;
  } else {
    let html = '';
    dayPosts.forEach(post => {
      html += `
        <div class="detail-item">
          <span class="detail-category">${post.category}</span>
          <a href="${post.url}">${post.title}</a>
        </div>
      `;
    });
    listContainer.innerHTML = html;
  }
}

function changeMonth(val) {
  currDate.setMonth(currDate.getMonth() + val);
  renderCalendar();
}

function goToday() {
  currDate = new Date();
  renderCalendar();
}

// 초기 렌더링
renderCalendar();
</script>