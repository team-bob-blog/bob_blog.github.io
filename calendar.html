---
layout: page
title: 월별 게시물 캘린더
description: >
  월별로 작성된 게시물을 확인할 수 있습니다.
hide_description: true
sitemap: false
permalink: /calendar/
---

<style>
.calendar-wrapper {
  max-width: 900px;
  margin: 0 auto;
  padding: 24px 16px 60px;
}
.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.calendar-header h2 {
  margin: 0;
  font-size: 1.5rem;
}
.calendar-nav {
  display: flex;
  gap: 8px;
}
.calendar-nav button {
  padding: 6px 10px;
  font-size: 0.9rem;
  cursor: pointer;
}
.post-item {
  padding: 12px 0;
  border-bottom: 1px solid #eee;
}
.post-item:last-child {
  border-bottom: none;
}
.post-title-link {
  font-weight: 600;
  color: #2c3e50;
  text-decoration: none;
}
.post-title-link:hover {
  text-decoration: underline;
}
.post-meta-row {
  margin-top: 4px;
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
  color: #777;
}
.post-category {
  display: inline-block;
  padding: 2px 6px;
  margin-right: 4px;
  border-radius: 4px;
  background: #eef5ff;
  font-size: 0.75rem;
}
.empty-state {
  padding: 32px 0;
  text-align: center;
  color: #999;
  font-style: italic;
}
</style>

<div class="calendar-wrapper">
  <div class="calendar-header">
    <h2 id="monthTitle">월별 게시물</h2>
    <div class="calendar-nav">
      <button type="button" onclick="changeMonth(-1)">◀ 이전</button>
      <button type="button" onclick="goToday()">오늘</button>
      <button type="button" onclick="changeMonth(1)">다음 ▶</button>
    </div>
  </div>

  <div id="postsContainer">
    <!-- 자바스크립트로 채움 -->
  </div>
</div>

<script>
// 1. Liquid로 JS 배열 생성 (가능한 단순하게)
const allPosts = [
{% for post in site.posts %}
  {
    year: {{ post.date | date: "%Y" | plus: 0 }},
    month: {{ post.date | date: "%m" | plus: 0 }},
    day: {{ post.date | date: "%d" | plus: 0 }},
    title: {{ post.title | jsonify }},
    url: {{ post.url | relative_url | jsonify }},
    categories: {{ post.categories | jsonify }}
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
];

// 2. 현재 연월 상태
let currentYear = new Date().getFullYear();
let currentMonth = new Date().getMonth() + 1;

// 3. 해당 월 포스트 필터링
function getPostsForMonth(year, month) {
  return allPosts
    .filter(p => p.year === year && p.month === month)
    .sort((a, b) => {
      // 최신 글이 위로
      const da = new Date(a.year, a.month - 1, a.day);
      const db = new Date(b.year, b.month - 1, b.day);
      return db - da;
    });
}

// 4. 렌더링
function renderCalendar() {
  const months = ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'];
  const titleEl = document.getElementById('monthTitle');
  const container = document.getElementById('postsContainer');

  if (!titleEl || !container) return;

  titleEl.textContent = currentYear + '년 ' + months[currentMonth - 1];

  const posts = getPostsForMonth(currentYear, currentMonth);

  if (!posts.length) {
    container.innerHTML = '<div class="empty-state">'
      + currentYear + '년 ' + months[currentMonth - 1]
      + '에 작성된 게시물이 없습니다.</div>';
    return;
  }

  let html = '';
  posts.forEach(p => {
    const dateStr = p.year + '년 ' + p.month + '월 ' + p.day + '일';
    let cats = '';
    if (Array.isArray(p.categories)) {
      p.categories.forEach(c => {
        if (c && c.toLowerCase() !== 'example') {
          cats += '<span class="post-category">' + c + '</span>';
        }
      });
    }
    html += `
      <div class="post-item">
        <a class="post-title-link" href=${p.url}>${p.title}</a>
        <div class="post-meta-row">
          <div>${cats}</div>
          <div>${dateStr}</div>
        </div>
      </div>
    `;
  });

  container.innerHTML = html;
}

// 5. 월 변경
function changeMonth(delta) {
  currentMonth += delta;
  if (currentMonth > 12) {
    currentMonth = 1;
    currentYear += 1;
  } else if (currentMonth < 1) {
    currentMonth = 12;
    currentYear -= 1;
  }
  renderCalendar();
}

// 6. 오늘로 이동
function goToday() {
  const today = new Date();
  currentYear = today.getFullYear();
  currentMonth = today.getMonth() + 1;
  renderCalendar();
}

// 7. 초기 렌더
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', renderCalendar);
} else {
  renderCalendar();
}
</script>